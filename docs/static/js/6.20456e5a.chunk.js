(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[6],{1681:function(e,t,n){"use strict";(function(e){var c,a,r=n(20),o=n(11),i=n(1),s=n.n(i),l=n(1725),u=n(1731),j=n(1732),f=n(1727),b=n(138),p=n(64),h=n(530),d=n(1695),O=n(1721),x=n(1722),v=n(22),g=n(36),m=n(0),y=n(60),w=n(316),T=(n(497),n(3)),k="https://inatatsu-tatsuhiro.github.io/SymbolDraw";t.a=function(t){var n=t.open,c=t.setOpen,a=t.txHash,r=Object(y.a)().getI18nText,b=Object(i.useState)(!1),v=Object(o.a)(b,2),P=v[0],A=(v[1],s.a.useCallback((function(){navigator.clipboard.writeText(a)}),[a]));return Object(T.jsx)(l.a,{open:n,onClose:function(){return c(!1)},children:Object(T.jsxs)(S,{children:[Object(T.jsx)(u.a,{variant:"h6",component:"div",children:r("invite")}),Object(T.jsxs)(j.a,{children:[Object(T.jsx)(f.a,{button:!0,children:Object(T.jsx)(O.a,{url:"".concat(k,"/canvas/").concat(a),children:Object(T.jsxs)(C,{children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(p.g,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:r("share_twitter")})})]})})}),Object(T.jsx)(f.a,{button:!0,children:Object(T.jsx)(x.a,{url:"".concat(k,"/canvas/").concat(a),children:Object(T.jsxs)(C,{children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(p.d,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:r("share_facebook")})})]})})}),Object(T.jsx)(f.a,{button:!0,children:Object(T.jsxs)(C,{onClick:A,children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:r("share_clipboard")})})]})}),Object(T.jsx)(f.a,{button:!0,children:Object(T.jsxs)(C,{onClick:function(){console.log("apostille"),Object(w.a)(a).then((function(t){console.log(t);var n=e.from(t,"base64"),c=new File([n.buffer],"symbol-draw.png",{type:"image/png"});console.log("file",c);var a=document.createElement("a");a.href=t,a.download=c.name,a.click()}))},children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(d.a,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:r("share_download")})})]})})]}),Object(T.jsx)(l.a,{open:P,children:Object(T.jsx)(S,{children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:"Create Apostille..."})})})]})})};var S=Object(v.a)(b.a)(c||(c=Object(r.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),C=Object(v.a)("div")(a||(a=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  margin: 4px 8px;\n"])))}).call(this,n(162).Buffer)},1729:function(e,t,n){"use strict";n.r(t);var c,a,r,o,i,s,l,u=n(1),j=n.n(u),f=n(20),b=n(11),p=n(21),h=n(1699),d=n(1698),O=n(22),x=n(64),v=n(530),g=n(136),m=n(1726),y=n(1723),w=n(133),T=n(966),k=n(36),S=n(60),C=n(3),P=function(e){var t=e.stageRef,n=e.saveFile,c=e.image,a=e.sharePrev,r=j.a.useState("pen"),o=Object(b.a)(r,2),i=o[0],s=o[1],l=j.a.useState(5),u=Object(b.a)(l,2),f=u[0],d=u[1],O=j.a.useState("#000000"),P=Object(b.a)(O,2),_=P[0],I=P[1],B=j.a.useState([]),U=Object(b.a)(B,2),H=U[0],J=U[1],L=j.a.useState([]),z=Object(b.a)(L,2),G=z[0],V=z[1],Y=j.a.useRef(!1),K=Object(S.a)().getI18nText;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(A,{children:[Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){return s("pen")},children:"pen"===i?Object(C.jsx)(x.f,{}):Object(C.jsx)(x.e,{})}),"pen"===i?Object(C.jsx)(M,{color:_}):Object(C.jsx)(M,{color:"white"})]}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){return s("eraser")},children:"eraser"===i?Object(C.jsx)(x.c,{}):Object(C.jsx)(x.b,{})}),Object(C.jsx)(M,{color:"white"})]}),Object(C.jsx)(E,{children:Object(C.jsx)(m.a,{"aria-label":"Custom marks",defaultValue:3,valueLabelDisplay:"auto",max:20,min:1,marks:[{value:1,label:"1pt"},{value:3,label:"3pt"},{value:5,label:"5pt"},{value:10,label:"10pt"},{value:15,label:"15pt"},{value:20,label:"20pt"}],onChange:function(e){return d(e.target.value)}})}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){var e=H.filter((function(e,t){return t!==H.length-1}));V((function(e){return[].concat(Object(p.a)(e),[H.filter((function(e,t){return t===H.length-1}))[0]])})),J(e)},disabled:0===H.length,children:Object(C.jsx)(v.c,{})}),Object(C.jsx)(M,{color:"white"})]}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){if(0!==G.length){var e=G.filter((function(e,t){return t!==G.length-1})),t=G[G.length-1];J((function(e){return[].concat(Object(p.a)(e),[t]).flat()})),V(e)}},disabled:0===G.length,children:Object(C.jsx)(v.b,{})}),Object(C.jsx)(M,{color:"white"})]})]}),Object(C.jsxs)(A,{children:[Object(C.jsx)(R,{children:Object(C.jsx)(h.d,{width:500,height:500,onMouseDown:function(e){Y.current=!0;var t=e.target.getStage().getPointerPosition();J([].concat(Object(p.a)(H),[{tool:i,points:[t.x,t.y],color:_,size:f}])),V([])},onMousemove:function(e){if(Y.current){var t=e.target.getStage().getPointerPosition(),n=H[H.length-1];n.points=n.points.concat([t.x,t.y]),H.splice(H.length-1,1,n),J(H.concat())}},onMouseup:function(){Y.current=!1},style:{border:"solid",marginTop:"10px"},ref:t,children:Object(C.jsxs)(h.b,{children:[null!==c&&Object(C.jsx)(h.a,{image:c}),H.map((function(e,t){return Object(C.jsx)(h.c,{points:e.points,stroke:e.color,strokeWidth:e.size,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"},t)}))]})})}),Object(C.jsx)(N,{color:_,onChangeComplete:function(e){I(e.hex)}})]}),Object(C.jsxs)(D,{children:[Object(C.jsx)(k.a,{margin:"16px",children:Object(C.jsx)(y.a,{title:K("tooltip_current_art"),children:Object(C.jsx)(w.a,{variant:"outlined",endIcon:Object(C.jsx)(T.a,{}),onClick:n,children:"Share Current Art"})})}),Object(C.jsx)(k.a,{margin:"16px",children:Object(C.jsx)(y.a,{title:K("tooltip_previous_art"),children:Object(C.jsx)(w.a,{variant:"outlined",endIcon:Object(C.jsx)(T.a,{}),onClick:a,children:"Share Previous Art"})})})]})]})},A=O.a.div(c||(c=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]))),F=O.a.div(a||(a=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),R=O.a.div(r||(r=Object(f.a)(["\n  background-color: #ffffff;\n"]))),E=O.a.div(o||(o=Object(f.a)(["\n  width: 500px;\n  margin: 0px 32px;\n"]))),N=Object(O.a)(d.a)({marginTop:"10px",marginLeft:"20px"}),M=Object(O.a)("div")(i||(i=Object(f.a)(["\n  background: ",";\n  height: 4px;\n"])),(function(e){return e.color})),D=Object(O.a)("div")(s||(s=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]))),_=n(316),I=n(1681),B=n(1725),U=n(1731),H=n(138),J=n(59),L=function(e){var t=e.hash,n=j.a.useState(new Image),c=Object(b.a)(n,2),a=c[0],r=c[1],o=j.a.useRef(null),i=j.a.useState(!1),s=Object(b.a)(i,2),l=s[0],f=s[1],p=j.a.useState(!1),h=Object(b.a)(p,2),d=(h[0],h[1]),O=j.a.useState(""),x=Object(b.a)(O,2),v=x[0],g=x[1],m=j.a.useState(!0),y=Object(b.a)(m,2),w=y[0],T=y[1],k=j.a.useState(!1),S=Object(b.a)(k,2),A=S[0],F=S[1],R=Object(J.b)(),E=Object(u.useState)(!1),N=Object(b.a)(E,2),M=N[0],D=N[1];if(j.a.useEffect((function(){if(""===t)return console.log("new game"),void T(!1);console.log("import:",t),Object(_.a)(t).then((function(e){T(!1);var t=new Image;t.src=e,r(t)})).catch((function(){console.log("dame"),F(!0)}))}),[t]),A)return Object(C.jsx)("div",{children:"NotFound This Transaction"});if(w)return Object(C.jsx)("div",{children:"GetTransaction...."});return Object(C.jsxs)("div",{children:[Object(C.jsx)(P,{saveFile:function(){if(D(!0),null!==o.current&&void 0!==R){var e=o.current.toDataURL();console.log(e),Object(_.b)(e,"draw-chain",R.prikey,t).then((function(e){g(e),D(!1),f(!0)}))}},stageRef:o,image:a,sharePrev:function(){d(!0)}}),Object(C.jsx)(I.a,{open:l,setOpen:f,txHash:v}),Object(C.jsx)(B.a,{open:M,children:Object(C.jsx)(z,{children:Object(C.jsx)(U.a,{variant:"h4",component:"div",children:"Create Art..."})})})]})},z=Object(O.a)(H.a)(l||(l=Object(f.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),G=n(7);t.default=function(){var e=Object(G.h)().hash;return Object(C.jsx)(L,{hash:e||""})}},316:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h}));var c=n(61),a=n(317),r=n(163),o=n.n(r),i=n(217),s="7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836",l="https://sym-test-01.opening-line.jp:3001",u=1637848847,j=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){b(t).then((function(t){if(t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(p(n))}})).catch((function(){var c=setInterval((function(){f(t).then((function(){setTimeout((function(){b(t).then((function(t){if(clearInterval(c),t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(p(n))}})).catch((function(){n("404")}))}),1e3)})).catch((function(){console.log("loading")}))}),1e3)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,c){t.getTransaction(e,i.TransactionGroup.Unconfirmed).toPromise().then((function(){c()})).catch((function(){n()}))}))},b=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,c){t.getTransaction(e,i.TransactionGroup.Confirmed).toPromise().then((function(e){n(e)})).catch((function(){c()}))}))},p=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.RepositoryFactoryHttp(l),a=n.createTransactionRepository(),r="",e.abrupt("return",new Promise((function(e){a.getTransaction(t,i.TransactionGroup.Confirmed).toPromise().then((function(t){var n,a=t.innerTransactions,o=Object(c.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;r+=i.message.payload}}catch(s){o.e(s)}finally{o.f()}e(r)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(a.a)(o.a.mark((function e(t,n,c,a){var r,j,f,b,p,h,d,O,x,v,g,m,y,w,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.Account.createFromPrivateKey(c,i.NetworkType.TEST_NET),j=i.Address.createFromRawAddress("TDEC5VUUAUYHKI2Y45WBDMGODAS42P3PPCTMGUY"),f=[],b=1023,p=0;p<=Math.floor(t.length/b);p++)h=t.slice(p*b,(p+1)*b),f.push(h);d=[],O=[],x=[],v=new i.RepositoryFactoryHttp(l),g=v.createTransactionRepository(),m=0;case 11:if(!(m<f.length)){e.next=25;break}if(y=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(f[m]),i.NetworkType.TEST_NET).toAggregate(r.publicAccount),d.push(y),m%100===99||m===f.length-1){e.next=16;break}return e.abrupt("continue",22);case 16:w=i.AggregateTransaction.createComplete(i.Deadline.create(u),d,i.NetworkType.TEST_NET,[],i.UInt64.fromUint(1e7)),T=r.sign(w,s),g.announce(T).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),O.push(T),x.push(T.hash),console.log("a",T);case 22:m++,e.next=11;break;case 25:return e.abrupt("return",new Promise((function(e){setTimeout((function(){for(var t=JSON.stringify({version:1,name:"symbol-draw",mode:n,previousHash:a,data:x.join(",")}),c=[],o=0;o<=Math.floor(t.length/b);o++)c.push(t.substr(o*b,b));var l=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(t),i.NetworkType.TEST_NET,i.UInt64.fromUint(2e6)),f=r.sign(l,s);g.announce(f).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),e(f.hash)}),1e3)})));case 26:case"end":return e.stop()}}),e)})));return function(t,n,c,a){return e.apply(this,arguments)}}()},375:function(e,t){},376:function(e,t){},382:function(e,t){},383:function(e,t){},388:function(e,t){},390:function(e,t){},391:function(e,t){},392:function(e,t){},395:function(e,t){},399:function(e,t){},404:function(e,t){},408:function(e,t){},497:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var c=n(317),a=(n(11),n(163)),r=n.n(a),o=(n(1724),n(833)),i=n(834),s=(n(217),"https://sym-test-01.opening-line.jp:3001"),l=function(e){var t=e.match(/--\sApostille\sTX\s(\w+)\s--/);return null===t||t.length<1?(console.log("not match"),""):(console.log("match"),t[1])},u=function(e){if(e.isValid){if(0===e.type)return 0;if(1===e.type)return 1}return-1},j=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.readAsArrayBuffer(t);case 2:return n=e.sent,c=l(t.name),e.abrupt("return",new Promise((function(e,t){i.AuditService.audit(n,c,s).then((function(n){if(n.signer&&n.apostilleAccount){var a=u(n),r=JSON.parse(JSON.stringify(n)).timestamp.split(".")[0]||"";e({signer:n.signer,apostilleAcount:n.apostilleAccount,hash:c,status:a,timestamp:r})}else console.log("reject",n),t()})).catch((function(e){console.error("ERROR"),console.error(e),t()}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=6.20456e5a.chunk.js.map