(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[10],{1477:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h}));var a=n(364),r=n(1465),c=n(46),o=n.n(c),i=n(253),s="7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836",l="https://sym-test-01.opening-line.jp:3001",u=1637848847,j=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){f(t).then((function(t){if(t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(p(n))}})).catch((function(){var a=setInterval((function(){b(t).then((function(){setTimeout((function(){f(t).then((function(t){if(clearInterval(a),t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(p(n))}})).catch((function(){n("404")}))}),1e3)})).catch((function(){console.log("loading")}))}),1e3)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Unconfirmed).toPromise().then((function(){a()})).catch((function(){n()}))}))},f=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Confirmed).toPromise().then((function(e){n(e)})).catch((function(){a()}))}))},p=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.RepositoryFactoryHttp(l),r=n.createTransactionRepository(),c="",e.abrupt("return",new Promise((function(e){r.getTransaction(t,i.TransactionGroup.Confirmed).toPromise().then((function(t){var n,r=t.innerTransactions,o=Object(a.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;c+=i.message.payload}}catch(s){o.e(s)}finally{o.f()}e(c)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(o.a.mark((function e(t,n,a,r){var c,j,b,f,p,h,d,O,x,v,g,m,y,w,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=i.Account.createFromPrivateKey(a,i.NetworkType.TEST_NET),j=i.Address.createFromRawAddress("TDEC5VUUAUYHKI2Y45WBDMGODAS42P3PPCTMGUY"),b=[],f=1023,p=0;p<=Math.floor(t.length/f);p++)h=t.slice(p*f,(p+1)*f),b.push(h);d=[],O=[],x=[],v=new i.RepositoryFactoryHttp(l),g=v.createTransactionRepository(),m=0;case 11:if(!(m<b.length)){e.next=25;break}if(y=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(b[m]),i.NetworkType.TEST_NET).toAggregate(c.publicAccount),d.push(y),m%100===99||m===b.length-1){e.next=16;break}return e.abrupt("continue",22);case 16:w=i.AggregateTransaction.createComplete(i.Deadline.create(u),d,i.NetworkType.TEST_NET,[],i.UInt64.fromUint(1e7)),T=c.sign(w,s),g.announce(T).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),O.push(T),x.push(T.hash),console.log("a",T);case 22:m++,e.next=11;break;case 25:return e.abrupt("return",new Promise((function(e){setTimeout((function(){for(var t=JSON.stringify({version:1,name:"symbol-draw",mode:n,previousHash:r,data:x.join(",")}),a=[],o=0;o<=Math.floor(t.length/f);o++)a.push(t.substr(o*f,f));var l=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(t),i.NetworkType.TEST_NET,i.UInt64.fromUint(2e6)),b=c.sign(l,s);g.announce(b).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),e(b.hash)}),1e3)})));case 26:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},1503:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(1465),r=(n(43),n(46)),c=n.n(r),o=(n(1723),n(1539)),i=n(1540),s=(n(253),"https://sym-test-01.opening-line.jp:3001"),l=function(e){var t=e.match(/--\sApostille\sTX\s(\w+)\s--/);return null===t||t.length<1?(console.log("not match"),""):(console.log("match"),t[1])},u=function(e){if(e.isValid){if(0===e.type)return 0;if(1===e.type)return 1}return-1},j=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.readAsArrayBuffer(t);case 2:return n=e.sent,a=l(t.name),e.abrupt("return",new Promise((function(e,t){i.AuditService.audit(n,a,s).then((function(n){if(n.signer&&n.apostilleAccount){var r=u(n),c=JSON.parse(JSON.stringify(n)).timestamp.split(".")[0]||"";e({signer:n.signer,apostilleAcount:n.apostilleAccount,hash:a,status:r,timestamp:c})}else console.log("reject",n),t()})).catch((function(e){console.error("ERROR"),console.error(e),t()}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1679:function(e,t,n){"use strict";(function(e){var a,r,c=n(79),o=n(43),i=n(3),s=n.n(i),l=n(1724),u=n(1734),j=n(1736),b=n(1727),f=n(1447),p=n(1537),h=n(1538),d=n(1693),O=n(1720),x=n(1721),v=n(111),g=n(206),m=n(1461),y=n(362),w=n(1477),T=(n(1503),n(13)),k="https://inatatsu-tatsuhiro.github.io/SymbolDraw";t.a=function(t){var n=t.open,a=t.setOpen,r=t.txHash,c=Object(y.a)().getI18nText,f=Object(i.useState)(!1),v=Object(o.a)(f,2),P=v[0],A=(v[1],s.a.useCallback((function(){navigator.clipboard.writeText(r)}),[r]));return Object(T.jsx)(l.a,{open:n,onClose:function(){return a(!1)},children:Object(T.jsxs)(S,{children:[Object(T.jsx)(u.a,{variant:"h6",component:"div",children:c("invite")}),Object(T.jsxs)(j.a,{children:[Object(T.jsx)(b.a,{button:!0,children:Object(T.jsx)(O.a,{url:"".concat(k,"/canvas/").concat(r),children:Object(T.jsxs)(C,{children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(p.f,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:c("share_twitter")})})]})})}),Object(T.jsx)(b.a,{button:!0,children:Object(T.jsx)(x.a,{url:"".concat(k,"/canvas/").concat(r),children:Object(T.jsxs)(C,{children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(p.c,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:c("share_facebook")})})]})})}),Object(T.jsx)(b.a,{button:!0,children:Object(T.jsxs)(C,{onClick:A,children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:c("share_clipboard")})})]})}),Object(T.jsx)(b.a,{button:!0,children:Object(T.jsxs)(C,{onClick:function(){console.log("apostille"),Object(w.a)(r).then((function(t){console.log(t);var n=e.from(t,"base64"),a=new File([n.buffer],"symbol-draw.png",{type:"image/png"});console.log("file",a);var r=document.createElement("a");r.href=t,r.download=a.name,r.click()}))},children:[Object(T.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(T.jsx)(d.a,{})}),Object(T.jsx)(g.a,{MLeft:"16px",children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:c("share_download")})})]})})]}),Object(T.jsx)(l.a,{open:P,children:Object(T.jsx)(S,{children:Object(T.jsx)(u.a,{variant:"h4",component:"div",children:"Create Apostille..."})})})]})})};var S=Object(v.a)(f.a)(a||(a=Object(c.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),C=Object(v.a)("div")(r||(r=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  margin: 4px 8px;\n"])))}).call(this,n(30).Buffer)},1729:function(e,t,n){"use strict";n.r(t);var a,r,c,o,i,s,l,u=n(3),j=n.n(u),b=n(79),f=n(43),p=n(91),h=n(1697),d=n(1696),O=n(111),x=n(1537),v=n(1538),g=n(1735),m=n(1726),y=n(1722),w=n(1443),T=n(1678),k=n(206),S=n(362),C=n(13),P=function(e){var t=e.stageRef,n=e.saveFile,a=e.image,r=e.sharePrev,c=j.a.useState("pen"),o=Object(f.a)(c,2),i=o[0],s=o[1],l=j.a.useState(5),u=Object(f.a)(l,2),b=u[0],d=u[1],O=j.a.useState("#000000"),P=Object(f.a)(O,2),_=P[0],I=P[1],B=j.a.useState([]),U=Object(f.a)(B,2),H=U[0],J=U[1],L=j.a.useState([]),z=Object(f.a)(L,2),G=z[0],V=z[1],Y=j.a.useRef(!1),K=Object(S.a)().getI18nText;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(A,{children:[Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){return s("pen")},children:"pen"===i?Object(C.jsx)(x.e,{}):Object(C.jsx)(x.d,{})}),"pen"===i?Object(C.jsx)(M,{color:_}):Object(C.jsx)(M,{color:"white"})]}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){return s("eraser")},children:"eraser"===i?Object(C.jsx)(x.b,{}):Object(C.jsx)(x.a,{})}),Object(C.jsx)(M,{color:"white"})]}),Object(C.jsx)(E,{children:Object(C.jsx)(m.a,{"aria-label":"Custom marks",defaultValue:3,valueLabelDisplay:"auto",max:20,min:1,marks:[{value:1,label:"1pt"},{value:3,label:"3pt"},{value:5,label:"5pt"},{value:10,label:"10pt"},{value:15,label:"15pt"},{value:20,label:"20pt"}],onChange:function(e){return d(e.target.value)}})}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){var e=H.filter((function(e,t){return t!==H.length-1}));V((function(e){return[].concat(Object(p.a)(e),[H.filter((function(e,t){return t===H.length-1}))[0]])})),J(e)},disabled:0===H.length,children:Object(C.jsx)(v.c,{})}),Object(C.jsx)(M,{color:"white"})]}),Object(C.jsxs)(F,{children:[Object(C.jsx)(g.a,{component:"span",onClick:function(){if(0!==G.length){var e=G.filter((function(e,t){return t!==G.length-1})),t=G[G.length-1];J((function(e){return[].concat(Object(p.a)(e),[t]).flat()})),V(e)}},disabled:0===G.length,children:Object(C.jsx)(v.b,{})}),Object(C.jsx)(M,{color:"white"})]})]}),Object(C.jsxs)(A,{children:[Object(C.jsx)(R,{children:Object(C.jsx)(h.d,{width:500,height:500,onMouseDown:function(e){Y.current=!0;var t=e.target.getStage().getPointerPosition();J([].concat(Object(p.a)(H),[{tool:i,points:[t.x,t.y],color:_,size:b}])),V([])},onMousemove:function(e){if(Y.current){var t=e.target.getStage().getPointerPosition(),n=H[H.length-1];n.points=n.points.concat([t.x,t.y]),H.splice(H.length-1,1,n),J(H.concat())}},onMouseup:function(){Y.current=!1},style:{border:"solid",marginTop:"10px"},ref:t,children:Object(C.jsxs)(h.b,{children:[null!==a&&Object(C.jsx)(h.a,{image:a}),H.map((function(e,t){return Object(C.jsx)(h.c,{points:e.points,stroke:e.color,strokeWidth:e.size,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"},t)}))]})})}),Object(C.jsx)(N,{color:_,onChangeComplete:function(e){I(e.hex)}})]}),Object(C.jsxs)(D,{children:[Object(C.jsx)(k.a,{margin:"16px",children:Object(C.jsx)(y.a,{title:K("tooltip_current_art"),children:Object(C.jsx)(w.a,{variant:"outlined",endIcon:Object(C.jsx)(T.a,{}),onClick:n,children:"Share Current Art"})})}),Object(C.jsx)(k.a,{margin:"16px",children:Object(C.jsx)(y.a,{title:K("tooltip_previous_art"),children:Object(C.jsx)(w.a,{variant:"outlined",endIcon:Object(C.jsx)(T.a,{}),onClick:r,children:"Share Previous Art"})})})]})]})},A=O.a.div(a||(a=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n"]))),F=O.a.div(r||(r=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),R=O.a.div(c||(c=Object(b.a)(["\n  background-color: #ffffff;\n"]))),E=O.a.div(o||(o=Object(b.a)(["\n  width: 500px;\n  margin: 0px 32px;\n"]))),N=Object(O.a)(d.a)({marginTop:"10px",marginLeft:"20px"}),M=Object(O.a)("div")(i||(i=Object(b.a)(["\n  background: ",";\n  height: 4px;\n"])),(function(e){return e.color})),D=Object(O.a)("div")(s||(s=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n"]))),_=n(1477),I=n(1679),B=n(1724),U=n(1734),H=n(1447),J=n(207),L=function(e){var t=e.hash,n=j.a.useState(new Image),a=Object(f.a)(n,2),r=a[0],c=a[1],o=j.a.useRef(null),i=j.a.useState(!1),s=Object(f.a)(i,2),l=s[0],b=s[1],p=j.a.useState(!1),h=Object(f.a)(p,2),d=(h[0],h[1]),O=j.a.useState(""),x=Object(f.a)(O,2),v=x[0],g=x[1],m=j.a.useState(!0),y=Object(f.a)(m,2),w=y[0],T=y[1],k=j.a.useState(!1),S=Object(f.a)(k,2),A=S[0],F=S[1],R=Object(J.b)(),E=Object(u.useState)(!1),N=Object(f.a)(E,2),M=N[0],D=N[1];if(j.a.useEffect((function(){if(""===t)return console.log("new game"),void T(!1);console.log("import:",t),Object(_.a)(t).then((function(e){T(!1);var t=new Image;t.src=e,c(t)})).catch((function(){console.log("dame"),F(!0)}))}),[t]),A)return Object(C.jsx)("div",{children:"NotFound This Transaction"});if(w)return Object(C.jsx)("div",{children:"GetTransaction...."});return Object(C.jsxs)("div",{children:[Object(C.jsx)(P,{saveFile:function(){if(D(!0),null!==o.current&&void 0!==R){var e=o.current.toDataURL();console.log(e),Object(_.b)(e,"draw-chain",R.prikey,t).then((function(e){g(e),D(!1),b(!0)}))}},stageRef:o,image:r,sharePrev:function(){d(!0)}}),Object(C.jsx)(I.a,{open:l,setOpen:b,txHash:v}),Object(C.jsx)(B.a,{open:M,children:Object(C.jsx)(z,{children:Object(C.jsx)(U.a,{variant:"h4",component:"div",children:"Create Art..."})})})]})},z=Object(O.a)(H.a)(l||(l=Object(b.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),G=n(23);t.default=function(){var e=Object(G.g)().hash;return Object(C.jsx)(L,{hash:e||""})}}}]);
//# sourceMappingURL=10.a4dbd8ee.chunk.js.map