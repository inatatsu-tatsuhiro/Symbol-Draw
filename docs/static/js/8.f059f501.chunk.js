(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[8],{1478:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h}));var a=n(363),r=n(1466),c=n(46),o=n.n(c),i=n(254),s="7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836",l="https://sym-test-01.opening-line.jp:3001",u=1637848847,j=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){b(t).then((function(t){if(t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(f(n))}})).catch((function(){var a=setInterval((function(){p(t).then((function(){setTimeout((function(){b(t).then((function(t){if(clearInterval(a),t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(f(n))}})).catch((function(){n("404")}))}),1e3)})).catch((function(){console.log("loading")}))}),1e3)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Unconfirmed).toPromise().then((function(){a()})).catch((function(){n()}))}))},b=function(e){var t=new i.RepositoryFactoryHttp(l).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Confirmed).toPromise().then((function(e){n(e)})).catch((function(){a()}))}))},f=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.RepositoryFactoryHttp(l),r=n.createTransactionRepository(),c="",e.abrupt("return",new Promise((function(e){r.getTransaction(t,i.TransactionGroup.Confirmed).toPromise().then((function(t){var n,r=t.innerTransactions,o=Object(a.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;c+=i.message.payload}}catch(s){o.e(s)}finally{o.f()}e(c)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(o.a.mark((function e(t,n,a,r){var c,j,p,b,f,h,d,O,x,v,g,m,y,T,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=i.Account.createFromPrivateKey(a,i.NetworkType.TEST_NET),j=i.Address.createFromRawAddress("TDEC5VUUAUYHKI2Y45WBDMGODAS42P3PPCTMGUY"),p=[],b=1023,f=0;f<=Math.floor(t.length/b);f++)h=t.slice(f*b,(f+1)*b),p.push(h);d=[],O=[],x=[],v=new i.RepositoryFactoryHttp(l),g=v.createTransactionRepository(),m=0;case 11:if(!(m<p.length)){e.next=25;break}if(y=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(p[m]),i.NetworkType.TEST_NET).toAggregate(c.publicAccount),d.push(y),m%100===99||m===p.length-1){e.next=16;break}return e.abrupt("continue",22);case 16:T=i.AggregateTransaction.createComplete(i.Deadline.create(u),d,i.NetworkType.TEST_NET,[],i.UInt64.fromUint(1e7)),w=c.sign(T,s),g.announce(w).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),O.push(w),x.push(w.hash),console.log("a",w);case 22:m++,e.next=11;break;case 25:return e.abrupt("return",new Promise((function(e){setTimeout((function(){for(var t=JSON.stringify({version:1,name:"symbol-draw",mode:n,previousHash:r,data:x.join(",")}),a=[],o=0;o<=Math.floor(t.length/b);o++)a.push(t.substr(o*b,b));var l=i.TransferTransaction.create(i.Deadline.create(u),j,[],i.PlainMessage.create(t),i.NetworkType.TEST_NET,i.UInt64.fromUint(2e6)),p=c.sign(l,s);g.announce(p).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),e(p.hash)}),1e3)})));case 26:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},1502:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(1466),r=(n(43),n(46)),c=n.n(r),o=(n(1723),n(1538)),i=n(1539),s=(n(254),"https://sym-test-01.opening-line.jp:3001"),l=function(e){var t=e.match(/--\sApostille\sTX\s(\w+)\s--/);return null===t||t.length<1?(console.log("not match"),""):(console.log("match"),t[1])},u=function(e){if(e.isValid){if(0===e.type)return 0;if(1===e.type)return 1}return-1},j=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.readAsArrayBuffer(t);case 2:return n=e.sent,a=l(t.name),e.abrupt("return",new Promise((function(e,t){i.AuditService.audit(n,a,s).then((function(n){if(n.signer&&n.apostilleAccount){var r=u(n),c=JSON.parse(JSON.stringify(n)).timestamp.split(".")[0]||"";e({signer:n.signer,apostilleAcount:n.apostilleAccount,hash:a,status:r,timestamp:c})}else console.log("reject",n),t()})).catch((function(e){console.error("ERROR"),console.error(e),t()}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1676:function(e,t,n){"use strict";(function(e){var a,r,c=n(68),o=n(43),i=n(3),s=n.n(i),l=n(1724),u=n(1697),j=n(1735),p=n(1727),b=n(1448),f=n(1536),h=n(1690),d=n(1691),O=n(1720),x=n(1721),v=n(80),g=n(151),m=n(1462),y=n(362),T=n(1478),w=(n(1502),n(12)),k="https://inatatsu-tatsuhiro.github.io/SymbolDraw";t.a=function(t){var n=t.open,a=t.setOpen,r=t.txHash,c=Object(y.a)().getI18nText,b=Object(i.useState)(!1),v=Object(o.a)(b,2),C=v[0],A=(v[1],s.a.useCallback((function(){navigator.clipboard.writeText(r)}),[r]));return Object(w.jsx)(l.a,{open:n,onClose:function(){return a(!1)},children:Object(w.jsxs)(S,{children:[Object(w.jsx)(u.a,{variant:"h6",component:"div",children:c("invite")}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(p.a,{button:!0,children:Object(w.jsx)(O.a,{url:"".concat(k,"/canvas/").concat(r),children:Object(w.jsxs)(P,{children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(f.f,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(u.a,{variant:"h4",component:"div",children:c("share_twitter")})})]})})}),Object(w.jsx)(p.a,{button:!0,children:Object(w.jsx)(x.a,{url:"".concat(k,"/canvas/").concat(r),children:Object(w.jsxs)(P,{children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(f.c,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(u.a,{variant:"h4",component:"div",children:c("share_facebook")})})]})})}),Object(w.jsx)(p.a,{button:!0,children:Object(w.jsxs)(P,{onClick:A,children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(h.a,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(u.a,{variant:"h4",component:"div",children:c("share_clipboard")})})]})}),Object(w.jsx)(p.a,{button:!0,children:Object(w.jsxs)(P,{onClick:function(){console.log("apostille"),Object(T.a)(r).then((function(t){console.log(t);var n=e.from(t,"base64"),a=new File([n.buffer],"symbol-draw.png",{type:"image/png"});console.log("file",a);var r=document.createElement("a");r.href=t,r.download=a.name,r.click()}))},children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(d.a,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(u.a,{variant:"h4",component:"div",children:c("share_download")})})]})})]}),Object(w.jsx)(l.a,{open:C,children:Object(w.jsx)(S,{children:Object(w.jsx)(u.a,{variant:"h4",component:"div",children:"Create Apostille..."})})})]})})};var S=Object(v.a)(b.a)(a||(a=Object(c.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),P=Object(v.a)("div")(r||(r=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  margin: 4px 8px;\n"])))}).call(this,n(30).Buffer)},1729:function(e,t,n){"use strict";n.r(t);var a,r,c,o,i,s,l,u=n(3),j=n.n(u),p=n(68),b=n(43),f=n(92),h=n(1695),d=n(1694),O=n(80),x=n(1536),v=n(1734),g=n(1726),m=n(1722),y=n(676),T=n(1675),w=n(151),k=n(362),S=n(12),P=function(e){var t=e.stageRef,n=e.saveFile,a=e.image,r=e.sharePrev,c=j.a.useState("pen"),o=Object(b.a)(c,2),i=o[0],s=o[1],l=j.a.useState(5),u=Object(b.a)(l,2),p=u[0],d=u[1],O=j.a.useState("#000000"),P=Object(b.a)(O,2),D=P[0],_=P[1],I=j.a.useState([]),B=Object(b.a)(I,2),U=B[0],H=B[1],J=j.a.useRef(!1),L=Object(k.a)().getI18nText;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(C,{children:[Object(S.jsxs)(A,{children:[Object(S.jsx)(v.a,{component:"span",onClick:function(){return s("pen")},children:"pen"===i?Object(S.jsx)(x.e,{}):Object(S.jsx)(x.d,{})}),"pen"===i?Object(S.jsx)(N,{color:D}):Object(S.jsx)(N,{color:"white"})]}),Object(S.jsxs)(A,{children:[Object(S.jsx)(v.a,{component:"span",onClick:function(){return s("eraser")},children:"eraser"===i?Object(S.jsx)(x.b,{}):Object(S.jsx)(x.a,{})}),Object(S.jsx)(N,{color:"white"})]}),Object(S.jsx)(R,{children:Object(S.jsx)(g.a,{"aria-label":"Custom marks",defaultValue:3,valueLabelDisplay:"auto",max:20,min:1,marks:[{value:1,label:"1pt"},{value:3,label:"3pt"},{value:5,label:"5pt"},{value:10,label:"10pt"},{value:15,label:"15pt"},{value:20,label:"20pt"}],onChange:function(e){return d(e.target.value)}})})]}),Object(S.jsxs)(C,{children:[Object(S.jsx)(F,{children:Object(S.jsx)(h.d,{width:500,height:500,onMouseDown:function(e){J.current=!0;var t=e.target.getStage().getPointerPosition();H([].concat(Object(f.a)(U),[{tool:i,points:[t.x,t.y],color:D,size:p}]))},onMousemove:function(e){if(J.current){var t=e.target.getStage().getPointerPosition(),n=U[U.length-1];n.points=n.points.concat([t.x,t.y]),U.splice(U.length-1,1,n),H(U.concat())}},onMouseup:function(){J.current=!1},style:{border:"solid",marginTop:"10px"},ref:t,children:Object(S.jsxs)(h.b,{children:[null!==a&&Object(S.jsx)(h.a,{image:a}),U.map((function(e,t){return Object(S.jsx)(h.c,{points:e.points,stroke:e.color,strokeWidth:e.size,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"},t)}))]})})}),Object(S.jsx)(E,{color:D,onChangeComplete:function(e){_(e.hex)}})]}),Object(S.jsxs)(M,{children:[Object(S.jsx)(w.a,{margin:"16px",children:Object(S.jsx)(m.a,{title:L("tooltip_current_art"),children:Object(S.jsx)(y.a,{variant:"outlined",endIcon:Object(S.jsx)(T.a,{}),onClick:n,children:"Share Current Art"})})}),Object(S.jsx)(w.a,{margin:"16px",children:Object(S.jsx)(m.a,{title:L("tooltip_previous_art"),children:Object(S.jsx)(y.a,{variant:"outlined",endIcon:Object(S.jsx)(T.a,{}),onClick:r,children:"Share Previous Art"})})})]})]})},C=O.a.div(a||(a=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n"]))),A=O.a.div(r||(r=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),F=O.a.div(c||(c=Object(p.a)(["\n  background-color: #ffffff;\n"]))),R=O.a.div(o||(o=Object(p.a)(["\n  width: 500px;\n  margin: 0px 32px;\n"]))),E=Object(O.a)(d.a)({marginTop:"10px",marginLeft:"20px"}),N=Object(O.a)("div")(i||(i=Object(p.a)(["\n  background: ",";\n  height: 4px;\n"])),(function(e){return e.color})),M=Object(O.a)("div")(s||(s=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n"]))),D=n(1478),_=n(1676),I=n(1724),B=n(1697),U=n(1448),H=n(208),J=function(e){var t=e.hash,n=j.a.useState(new Image),a=Object(b.a)(n,2),r=a[0],c=a[1],o=j.a.useRef(null),i=j.a.useState(!1),s=Object(b.a)(i,2),l=s[0],p=s[1],f=j.a.useState(!1),h=Object(b.a)(f,2),d=h[0],O=h[1],x=j.a.useState(""),v=Object(b.a)(x,2),g=v[0],m=v[1],y=j.a.useState(!0),T=Object(b.a)(y,2),w=T[0],k=T[1],C=j.a.useState(!1),A=Object(b.a)(C,2),F=A[0],R=A[1],E=Object(H.b)(),N=Object(u.useState)(!1),M=Object(b.a)(N,2),U=M[0],J=M[1];if(j.a.useEffect((function(){if(""===t)return console.log("new game"),void k(!1);console.log("import:",t),Object(D.a)(t).then((function(e){k(!1);var t=new Image;t.src=e,c(t)})).catch((function(){console.log("dame"),R(!0)}))}),[t]),F)return Object(S.jsx)("div",{children:"NotFound This Transaction"});if(w)return Object(S.jsx)("div",{children:"GetTransaction...."});return Object(S.jsxs)("div",{children:[Object(S.jsx)(P,{saveFile:function(){if(J(!0),null!==o.current&&void 0!==E){var e=o.current.toDataURL();console.log(e),Object(D.b)(e,"draw-chain",E.prikey,t).then((function(e){m(e),J(!1),p(!0)}))}},stageRef:o,image:r,sharePrev:function(){O(!0)}}),Object(S.jsx)(_.a,{open:l,setOpen:p,txHash:g}),Object(S.jsx)(_.a,{open:d,setOpen:O,txHash:t}),Object(S.jsx)(I.a,{open:U,children:Object(S.jsx)(L,{children:Object(S.jsx)(B.a,{variant:"h4",component:"div",children:"Create Art..."})})})]})},L=Object(O.a)(U.a)(l||(l=Object(p.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),z=n(23);t.default=function(){var e=Object(z.g)().hash;return Object(S.jsx)(J,{hash:e||""})}}}]);
//# sourceMappingURL=8.f059f501.chunk.js.map