(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[7],{1675:function(e,t,n){"use strict";(function(e){var a,r,c=n(14),o=n(9),i=n(0),s=n.n(i),u=n(1723),l=n(1696),j=n(1734),f=n(1726),p=n(115),b=n(520),h=n(1689),d=n(1690),O=n(1719),x=n(1720),v=n(18),g=n(27),m=n(251),y=n(53),T=n(298),w=(n(484),n(2)),C="https://inatatsu-tatsuhiro.github.io/SymbolDraw";t.a=function(t){var n=t.open,a=t.setOpen,r=t.txHash,c=Object(y.a)().getI18nText,p=Object(i.useState)(!1),v=Object(o.a)(p,2),P=v[0],A=(v[1],s.a.useCallback((function(){navigator.clipboard.writeText(r)}),[r]));return Object(w.jsx)(u.a,{open:n,onClose:function(){return a(!1)},children:Object(w.jsxs)(k,{children:[Object(w.jsx)(l.a,{variant:"h6",component:"div",children:c("invite")}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(f.a,{button:!0,children:Object(w.jsx)(O.a,{url:"".concat(C,"/canvas/").concat(r),children:Object(w.jsxs)(S,{children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(b.f,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(l.a,{variant:"h4",component:"div",children:c("share_twitter")})})]})})}),Object(w.jsx)(f.a,{button:!0,children:Object(w.jsx)(x.a,{url:"".concat(C,"/canvas/").concat(r),children:Object(w.jsxs)(S,{children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(b.c,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(l.a,{variant:"h4",component:"div",children:c("share_facebook")})})]})})}),Object(w.jsx)(f.a,{button:!0,children:Object(w.jsxs)(S,{onClick:A,children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(h.a,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(l.a,{variant:"h4",component:"div",children:c("share_clipboard")})})]})}),Object(w.jsx)(f.a,{button:!0,children:Object(w.jsxs)(S,{onClick:function(){console.log("apostille"),Object(T.a)(r).then((function(t){console.log(t);var n=e.from(t,"base64"),a=new File([n.buffer],"symbol-draw.png",{type:"image/png"});console.log("file",a);var r=document.createElement("a");r.href=t,r.download=a.name,r.click()}))},children:[Object(w.jsx)(m.b.Provider,{value:{size:"32px"},children:Object(w.jsx)(d.a,{})}),Object(w.jsx)(g.a,{MLeft:"16px",children:Object(w.jsx)(l.a,{variant:"h4",component:"div",children:c("share_download")})})]})})]}),Object(w.jsx)(u.a,{open:P,children:Object(w.jsx)(k,{children:Object(w.jsx)(l.a,{variant:"h4",component:"div",children:"Create Apostille..."})})})]})})};var k=Object(v.a)(p.a)(a||(a=Object(c.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),S=Object(v.a)("div")(r||(r=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  margin: 4px 8px;\n"])))}).call(this,n(139).Buffer)},1728:function(e,t,n){"use strict";n.r(t);var a,r,c,o,i,s,u,l=n(0),j=n.n(l),f=n(14),p=n(9),b=n(19),h=n(1694),d=n(1693),O=n(18),x=n(520),v=n(1733),g=n(1725),m=n(1721),y=n(71),T=n(960),w=n(27),C=n(53),k=n(2),S=function(e){var t=e.stageRef,n=e.saveFile,a=e.image,r=e.sharePrev,c=j.a.useState("pen"),o=Object(p.a)(c,2),i=o[0],s=o[1],u=j.a.useState(5),l=Object(p.a)(u,2),f=l[0],d=l[1],O=j.a.useState("#000000"),S=Object(p.a)(O,2),M=S[0],B=S[1],_=j.a.useState([]),I=Object(p.a)(_,2),U=I[0],H=I[1],J=j.a.useRef(!1),L=Object(C.a)().getI18nText;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(P,{children:[Object(k.jsxs)(A,{children:[Object(k.jsx)(v.a,{component:"span",onClick:function(){return s("pen")},children:"pen"===i?Object(k.jsx)(x.e,{}):Object(k.jsx)(x.d,{})}),"pen"===i?Object(k.jsx)(D,{color:M}):Object(k.jsx)(D,{color:"white"})]}),Object(k.jsxs)(A,{children:[Object(k.jsx)(v.a,{component:"span",onClick:function(){return s("eraser")},children:"eraser"===i?Object(k.jsx)(x.b,{}):Object(k.jsx)(x.a,{})}),Object(k.jsx)(D,{color:"white"})]}),Object(k.jsx)(F,{children:Object(k.jsx)(g.a,{"aria-label":"Custom marks",defaultValue:3,valueLabelDisplay:"auto",max:20,min:1,marks:[{value:1,label:"1pt"},{value:3,label:"3pt"},{value:5,label:"5pt"},{value:10,label:"10pt"},{value:15,label:"15pt"},{value:20,label:"20pt"}],onChange:function(e){return d(e.target.value)}})})]}),Object(k.jsxs)(P,{children:[Object(k.jsx)(E,{children:Object(k.jsx)(h.d,{width:500,height:500,onMouseDown:function(e){J.current=!0;var t=e.target.getStage().getPointerPosition();H([].concat(Object(b.a)(U),[{tool:i,points:[t.x,t.y],color:M,size:f}]))},onMousemove:function(e){if(J.current){var t=e.target.getStage().getPointerPosition(),n=U[U.length-1];n.points=n.points.concat([t.x,t.y]),U.splice(U.length-1,1,n),H(U.concat())}},onMouseup:function(){J.current=!1},style:{border:"solid",marginTop:"10px"},ref:t,children:Object(k.jsxs)(h.b,{children:[null!==a&&Object(k.jsx)(h.a,{image:a}),U.map((function(e,t){return Object(k.jsx)(h.c,{points:e.points,stroke:e.color,strokeWidth:e.size,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"},t)}))]})})}),Object(k.jsx)(R,{color:M,onChangeComplete:function(e){B(e.hex)}})]}),Object(k.jsxs)(N,{children:[Object(k.jsx)(w.a,{margin:"16px",children:Object(k.jsx)(m.a,{title:L("tooltip_current_art"),children:Object(k.jsx)(y.a,{variant:"outlined",endIcon:Object(k.jsx)(T.a,{}),onClick:n,children:"Share Current Art"})})}),Object(k.jsx)(w.a,{margin:"16px",children:Object(k.jsx)(m.a,{title:L("tooltip_previous_art"),children:Object(k.jsx)(y.a,{variant:"outlined",endIcon:Object(k.jsx)(T.a,{}),onClick:r,children:"Share Previous Art"})})})]})]})},P=O.a.div(a||(a=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]))),A=O.a.div(r||(r=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),E=O.a.div(c||(c=Object(f.a)(["\n  background-color: #ffffff;\n"]))),F=O.a.div(o||(o=Object(f.a)(["\n  width: 500px;\n  margin: 0px 32px;\n"]))),R=Object(O.a)(d.a)({marginTop:"10px",marginLeft:"20px"}),D=Object(O.a)("div")(i||(i=Object(f.a)(["\n  background: ",";\n  height: 4px;\n"])),(function(e){return e.color})),N=Object(O.a)("div")(s||(s=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]))),M=n(298),B=n(1675),_=n(1723),I=n(1696),U=n(115),H=function(e){var t=e.hash,n=j.a.useState(new Image),a=Object(p.a)(n,2),r=a[0],c=a[1],o=j.a.useRef(null),i=j.a.useState(!1),s=Object(p.a)(i,2),u=s[0],f=s[1],b=j.a.useState(!1),h=Object(p.a)(b,2),d=h[0],O=h[1],x=j.a.useState(""),v=Object(p.a)(x,2),g=v[0],m=v[1],y=j.a.useState(!0),T=Object(p.a)(y,2),w=T[0],C=T[1],P=j.a.useState(!1),A=Object(p.a)(P,2),E=A[0],F=A[1],R=Object(l.useState)(!1),D=Object(p.a)(R,2),N=D[0],U=D[1];if(j.a.useEffect((function(){if(""===t)return console.log("new game"),void C(!1);console.log("import:",t),Object(M.a)(t).then((function(e){C(!1);var t=new Image;t.src=e,c(t)})).catch((function(){console.log("dame"),F(!0)}))}),[t]),E)return Object(k.jsx)("div",{children:"NotFound This Transaction"});if(w)return Object(k.jsx)("div",{children:"GetTransaction...."});return Object(k.jsxs)("div",{children:[Object(k.jsx)(S,{saveFile:function(){if(U(!0),null!==o.current){var e=o.current.toDataURL();console.log(e),Object(M.b)(e,"draw-chain",t).then((function(e){m(e),U(!1),f(!0)}))}},stageRef:o,image:r,sharePrev:function(){O(!0)}}),Object(k.jsx)(B.a,{open:u,setOpen:f,txHash:g}),Object(k.jsx)(B.a,{open:d,setOpen:O,txHash:t}),Object(k.jsx)(_.a,{open:N,children:Object(k.jsx)(J,{children:Object(k.jsx)(I.a,{variant:"h4",component:"div",children:"Create Art..."})})})]})},J=Object(O.a)(U.a)(u||(u=Object(f.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),L=n(4);t.default=function(){var e=Object(L.g)().hash;return Object(k.jsx)(H,{hash:e||""})}},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h}));var a=n(54),r=n(299),c=n(140),o=n.n(c),i=n(194),s="7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836",u="https://sym-test-01.opening-line.jp:3001",l=1637848847,j=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){p(t).then((function(t){if(t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(b(n))}})).catch((function(){var a=setInterval((function(){f(t).then((function(){setTimeout((function(){p(t).then((function(t){if(clearInterval(a),t instanceof i.TransferTransaction){var n=JSON.parse(t.message.payload).data;e(b(n))}})).catch((function(){n("404")}))}),1e3)})).catch((function(){console.log("loading")}))}),1e3)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=new i.RepositoryFactoryHttp(u).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Unconfirmed).toPromise().then((function(){a()})).catch((function(){n()}))}))},p=function(e){var t=new i.RepositoryFactoryHttp(u).createTransactionRepository();return new Promise((function(n,a){t.getTransaction(e,i.TransactionGroup.Confirmed).toPromise().then((function(e){n(e)})).catch((function(){a()}))}))},b=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.RepositoryFactoryHttp(u),r=n.createTransactionRepository(),c="",e.abrupt("return",new Promise((function(e){r.getTransaction(t,i.TransactionGroup.Confirmed).toPromise().then((function(t){var n,r=t.innerTransactions,o=Object(a.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;c+=i.message.payload}}catch(s){o.e(s)}finally{o.f()}e(c)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(o.a.mark((function e(t,n,a){var r,c,j,f,p,b,h,d,O,x,v,g,m,y,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.Account.createFromPrivateKey("891D9D7E9672925123CFB7766CE9AC740BAFED43AE78F64CE2D296F54E62E57A",i.NetworkType.TEST_NET),c=i.Address.createFromRawAddress("TDEC5VUUAUYHKI2Y45WBDMGODAS42P3PPCTMGUY"),j=[],f=1023,p=0;p<=Math.floor(t.length/f);p++)b=t.slice(p*f,(p+1)*f),j.push(b);h=[],d=[],O=[],x=new i.RepositoryFactoryHttp(u),v=x.createTransactionRepository(),g=0;case 11:if(!(g<j.length)){e.next=25;break}if(m=i.TransferTransaction.create(i.Deadline.create(l),c,[],i.PlainMessage.create(j[g]),i.NetworkType.TEST_NET).toAggregate(r.publicAccount),h.push(m),g%100===99||g===j.length-1){e.next=16;break}return e.abrupt("continue",22);case 16:y=i.AggregateTransaction.createComplete(i.Deadline.create(l),h,i.NetworkType.TEST_NET,[],i.UInt64.fromUint(1e7)),T=r.sign(y,s),v.announce(T).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),d.push(T),O.push(T.hash),console.log("a",T);case 22:g++,e.next=11;break;case 25:return e.abrupt("return",new Promise((function(e){setTimeout((function(){for(var t=JSON.stringify({version:1,name:"symbol-draw",mode:n,previousHash:a,data:O.join(",")}),o=[],u=0;u<=Math.floor(t.length/f);u++)o.push(t.substr(u*f,f));var j=i.TransferTransaction.create(i.Deadline.create(l),c,[],i.PlainMessage.create(t),i.NetworkType.TEST_NET,i.UInt64.fromUint(2e6)),p=r.sign(j,s);v.announce(p).subscribe((function(e){return console.log(e)}),(function(e){return console.error(e)})),e(p.hash)}),1e3)})));case 26:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},362:function(e,t){},363:function(e,t){},369:function(e,t){},370:function(e,t){},375:function(e,t){},377:function(e,t){},378:function(e,t){},379:function(e,t){},382:function(e,t){},386:function(e,t){},391:function(e,t){},395:function(e,t){},484:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(299),r=(n(9),n(140)),c=n.n(r),o=(n(1722),n(823)),i=n(824),s=(n(194),"https://sym-test-01.opening-line.jp:3001"),u=function(e){var t=e.match(/--\sApostille\sTX\s(\w+)\s--/);return null===t||t.length<1?(console.log("not match"),""):(console.log("match"),t[1])},l=function(e){if(e.isValid){if(0===e.type)return 0;if(1===e.type)return 1}return-1},j=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.readAsArrayBuffer(t);case 2:return n=e.sent,a=u(t.name),e.abrupt("return",new Promise((function(e,t){i.AuditService.audit(n,a,s).then((function(n){if(n.signer&&n.apostilleAccount){var r=l(n),c=JSON.parse(JSON.stringify(n)).timestamp.split(".")[0]||"";e({signer:n.signer,apostilleAcount:n.apostilleAccount,hash:a,status:r,timestamp:c})}else console.log("reject",n),t()})).catch((function(e){console.error("ERROR"),console.error(e),t()}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=7.fe5c672d.chunk.js.map