{"version":3,"sources":["components/elements/ShareModal/index.tsx","components/elements/Canvas/index.tsx","features/draw/Presenter.tsx","features/draw/index.tsx","libs/Symbol/ImageIO.ts","libs/Symbol/Apostille.ts"],"names":["baselink","Component","open","setOpen","txHash","getI18nText","useI18n","useState","loading","copy","React","useCallback","navigator","clipboard","writeText","onClose","SPaper","variant","component","button","url","Wrapper","Provider","value","size","MLeft","onClick","console","log","getFile","then","img","buf","Buffer","from","f","File","buffer","type","a","document","createElement","href","download","name","click","styled","Paper","stageRef","saveFile","image","sharePrev","tool","setTool","setSize","color","setColor","lines","setLines","pastLines","setPastLines","isDrawing","useRef","FlexDiv","FlexCol","IconButton","SBsPenFill","Wrap","Slider","defaultValue","valueLabelDisplay","max","min","marks","label","onChange","e","target","newLines","filter","l","i","length","prev","disabled","addLine","flat","StageDiv","width","height","onMouseDown","current","pos","getStage","getPointerPosition","points","x","y","onMousemove","point","lastLine","concat","splice","onMouseup","style","border","marginTop","ref","map","line","stroke","strokeWidth","tension","lineCap","globalCompositeOperation","CustomSketchPicker","onChangeComplete","hex","Wraper","margin","Tooltip","title","Button","endIcon","div","SketchPicker","marginLeft","props","Page","hash","Image","setImage","setOpenPM","setTxHash","isLoading","setIsLoading","error","setError","context","usePrikey","setLoading","useEffect","src","catch","Canvas","undefined","toDataURL","prikey","h","ShareModal","Modal","Typography","Container","useParams","G_HASH","NODE","EPOCH","Promise","resolve","reject","checkConfirmed","tx","TransferTransaction","JSON","parse","message","payload","data","innerTxJoin","timer","setInterval","checkUnConfirmed","setTimeout","clearInterval","transactionHttp","RepositoryFactoryHttp","createTransactionRepository","res","rej","getTransaction","TransactionGroup","Unconfirmed","toPromise","Confirmed","repositoryFactory","agtx","innerTxs","innerTransactions","inTx","base64img","gameMode","previousHash","signer","Account","createFromPrivateKey","NetworkType","TEST_NET","acc","Address","createFromRawAddress","array","MSG_SIZE","Math","floor","arr","slice","push","txs","agtxs","hashes","create","Deadline","PlainMessage","toAggregate","publicAccount","AggregateTransaction","createComplete","UInt64","fromUint","signedTx","sign","announce","subscribe","err","stringify","version","mode","join","substr","st","apiEndpoint","getTxHash","filename","match","getValidStatus","r","isValid","audit","file","fileReader","fileBuf","AuditService","apostilleAccount","status","t","timestamp","split","apostilleAcount"],"mappings":"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","file":"static/js/6.20456e5a.chunk.js","sourcesContent":["import React, { Dispatch, useState } from 'react'\nimport { List, ListItem, Modal, Paper, Typography } from '@mui/material'\n\nimport { BsFacebook, BsTwitter } from 'react-icons/bs'\nimport { BiCopyAlt } from 'react-icons/bi'\nimport { FaFileDownload } from 'react-icons/fa'\nimport { TwitterShareButton, FacebookShareButton } from 'react-share'\nimport styled from '@emotion/styled'\nimport Spacer from '../../utils/Spacer'\nimport { IconContext } from 'react-icons/lib'\n\nimport { useI18n } from '../../../utils/useI18n'\nimport { getFile } from '../../../libs/Symbol/ImageIO'\nimport {} from '../../../libs/Symbol/Apostille'\n\nexport type Props = {\n  open: boolean\n  setOpen: Dispatch<boolean>\n  txHash: string\n}\nconst baselink = 'https://inatatsu-tatsuhiro.github.io/SymbolDraw'\nconst Component: React.VFC<Props> = ({ open, setOpen, txHash }) => {\n  const { getI18nText } = useI18n()\n  const [loading, setLoading] = useState(false)\n  const copy = React.useCallback(() => {\n    navigator.clipboard.writeText(txHash)\n  }, [txHash])\n\n  const apostille = () => {\n    // setLoading(true)\n    console.log('apostille')\n    getFile(txHash).then((img) => {\n      console.log(img)\n      const buf = Buffer.from(img, 'base64')\n      const f = new File([buf.buffer], 'symbol-draw.png', {\n        type: 'image/png',\n      })\n      console.log('file', f)\n      const a = document.createElement('a')\n      a.href = img\n      a.download = f.name\n      a.click()\n      // const signer = Account.createFromPrivateKey(master, NetworkType.TEST_NET)\n      // createApostilleTransaction(f, signer)\n      //   .then((result) => {\n      //     if (!(result instanceof AggregateTransaction)) {\n      //       return\n      //     }\n\n      //     if (!result.transactionInfo) {\n      //       return\n      //     }\n      //     if (!result.transactionInfo.hash) {\n      //       return\n      //     }\n      //     console.log('result', result)\n      //     const hash = result.transactionInfo.hash\n      //     const fn = getApostilleFileName(f.name, hash)\n      //   })\n      //   .finally(() => {\n      //     setLoading(false)\n      //   })\n    })\n    // getApoFile(txHash).then((imgs) => {\n    //   console.log(imgs)\n    //   // const bufs = Buffer.from(img, 'base64')\n    //   // console.log('bufs', bufs)\n    // })\n  }\n  return (\n    <Modal open={open} onClose={() => setOpen(false)}>\n      <SPaper>\n        <Typography variant=\"h6\" component=\"div\">\n          {getI18nText('invite')}\n        </Typography>\n        <List>\n          <ListItem button>\n            <TwitterShareButton url={`${baselink}/canvas/${txHash}`}>\n              <Wrapper>\n                <IconContext.Provider value={{ size: '32px' }}>\n                  <BsTwitter />\n                </IconContext.Provider>\n                <Spacer MLeft=\"16px\">\n                  <Typography variant=\"h4\" component=\"div\">\n                    {getI18nText('share_twitter')}\n                  </Typography>\n                </Spacer>\n              </Wrapper>\n            </TwitterShareButton>\n          </ListItem>\n          <ListItem button>\n            <FacebookShareButton url={`${baselink}/canvas/${txHash}`}>\n              <Wrapper>\n                <IconContext.Provider value={{ size: '32px' }}>\n                  <BsFacebook />\n                </IconContext.Provider>\n                <Spacer MLeft=\"16px\">\n                  <Typography variant=\"h4\" component=\"div\">\n                    {getI18nText('share_facebook')}\n                  </Typography>\n                </Spacer>\n              </Wrapper>\n            </FacebookShareButton>\n          </ListItem>\n          <ListItem button>\n            <Wrapper onClick={copy}>\n              <IconContext.Provider value={{ size: '32px' }}>\n                <BiCopyAlt />\n              </IconContext.Provider>\n              <Spacer MLeft=\"16px\">\n                <Typography variant=\"h4\" component=\"div\">\n                  {getI18nText('share_clipboard')}\n                </Typography>\n              </Spacer>\n            </Wrapper>\n          </ListItem>\n          <ListItem button>\n            <Wrapper onClick={apostille}>\n              <IconContext.Provider value={{ size: '32px' }}>\n                <FaFileDownload />\n              </IconContext.Provider>\n              <Spacer MLeft=\"16px\">\n                <Typography variant=\"h4\" component=\"div\">\n                  {getI18nText('share_download')}\n                </Typography>\n              </Spacer>\n            </Wrapper>\n          </ListItem>\n        </List>\n        <Modal open={loading}>\n          <SPaper>\n            <Typography variant=\"h4\" component=\"div\">\n              Create Apostille...\n            </Typography>\n          </SPaper>\n        </Modal>\n      </SPaper>\n    </Modal>\n  )\n}\n\nexport default Component\nconst SPaper = styled(Paper)`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Wrapper = styled('div')`\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  margin: 4px 8px;\n`\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Ref } from 'react'\nimport { Stage, Layer, Line, Image as KImage } from 'react-konva'\nimport { SketchPicker } from 'react-color'\nimport Konva from 'konva'\nimport styled from '@emotion/styled'\n\nimport { BsPenFill, BsPen, BsEraserFill, BsEraser } from 'react-icons/bs'\nimport { BiUndo, BiRedo } from 'react-icons/bi'\nimport { Button, IconButton, Slider, Tooltip } from '@mui/material'\nimport { FiSend } from 'react-icons/fi'\nimport Space from '../../utils/Spacer'\nimport { useI18n } from '../../../utils/useI18n'\n\nexport type Props = {\n  stageRef: Ref<Konva.Stage>\n  saveFile: () => void\n  image: HTMLImageElement\n  sharePrev: () => void\n}\n\nconst Component: React.VFC<Props> = ({\n  stageRef,\n  saveFile,\n  image,\n  sharePrev,\n}) => {\n  const [tool, setTool] = React.useState('pen')\n  const [size, setSize] = React.useState(5)\n  const [color, setColor] = React.useState('#000000')\n  const [lines, setLines] = React.useState<any[]>([])\n  const [pastLines, setPastLines] = React.useState<any[]>([])\n  const isDrawing = React.useRef(false)\n\n  const { getI18nText } = useI18n()\n\n  const marks = [\n    {\n      value: 1,\n      label: '1pt',\n    },\n    {\n      value: 3,\n      label: '3pt',\n    },\n    {\n      value: 5,\n      label: '5pt',\n    },\n    {\n      value: 10,\n      label: '10pt',\n    },\n    {\n      value: 15,\n      label: '15pt',\n    },\n    {\n      value: 20,\n      label: '20pt',\n    },\n  ]\n\n  const handleMouseDown = (e: any) => {\n    isDrawing.current = true\n    const pos = e.target.getStage().getPointerPosition()\n    setLines([\n      ...lines,\n      {\n        tool,\n        points: [pos.x, pos.y],\n        color,\n        size,\n      },\n    ])\n    setPastLines([])\n  }\n\n  const undo = () => {\n    const newLines = lines.filter((l, i) => i !== lines.length - 1)\n    setPastLines((prev) => [\n      ...prev,\n      lines.filter((l, i) => i === lines.length - 1)[0],\n    ])\n    setLines(newLines)\n  }\n\n  const redo = () => {\n    if (pastLines.length === 0) return\n    const newLines = pastLines.filter((l, i) => i !== pastLines.length - 1)\n    const addLine = pastLines[pastLines.length - 1]\n    setLines((prev) => [...prev, addLine].flat())\n    setPastLines(newLines)\n  }\n\n  const handleMouseMove = (e: any) => {\n    // no drawing - skipping\n    if (!isDrawing.current) {\n      return\n    }\n    const stage = e.target.getStage()\n    const point = stage.getPointerPosition()\n    const lastLine = lines[lines.length - 1]\n    lastLine.points = lastLine.points.concat([point.x, point.y])\n    lines.splice(lines.length - 1, 1, lastLine)\n    setLines(lines.concat())\n  }\n  const handleChangeComplete = (color: any) => {\n    setColor(color.hex)\n  }\n  const handleMouseUp = () => {\n    isDrawing.current = false\n  }\n\n  const test = () => {\n    console.log('lines', lines)\n    console.log('pasts', pastLines)\n  }\n\n  return (\n    <>\n      <FlexDiv>\n        <FlexCol>\n          <IconButton component=\"span\" onClick={() => setTool('pen')}>\n            {tool === 'pen' ? <BsPenFill /> : <BsPen />}\n          </IconButton>\n          {tool === 'pen' ? (\n            <SBsPenFill color={color} />\n          ) : (\n            <SBsPenFill color=\"white\" />\n          )}\n        </FlexCol>\n        <FlexCol>\n          <IconButton component=\"span\" onClick={() => setTool('eraser')}>\n            {tool === 'eraser' ? <BsEraserFill /> : <BsEraser />}\n          </IconButton>\n          <SBsPenFill color=\"white\" />\n        </FlexCol>\n        <Wrap>\n          <Slider\n            aria-label=\"Custom marks\"\n            defaultValue={3}\n            valueLabelDisplay=\"auto\"\n            max={20}\n            min={1}\n            marks={marks}\n            onChange={(e: any) => setSize(e.target.value)}\n          />\n        </Wrap>\n        <FlexCol>\n          <IconButton\n            component=\"span\"\n            onClick={undo}\n            disabled={lines.length === 0}>\n            <BiUndo />\n          </IconButton>\n          <SBsPenFill color=\"white\" />\n        </FlexCol>\n        <FlexCol>\n          <IconButton\n            component=\"span\"\n            onClick={redo}\n            disabled={pastLines.length === 0}>\n            <BiRedo />\n          </IconButton>\n          <SBsPenFill color=\"white\" />\n        </FlexCol>\n      </FlexDiv>\n      <FlexDiv>\n        <StageDiv>\n          <Stage\n            width={500}\n            height={500}\n            onMouseDown={handleMouseDown}\n            onMousemove={handleMouseMove}\n            onMouseup={handleMouseUp}\n            style={{\n              border: 'solid',\n              marginTop: '10px',\n            }}\n            ref={stageRef}>\n            <Layer>\n              {image !== null && <KImage image={image} />}\n              {lines.map((line, i) => (\n                <Line\n                  key={i}\n                  points={line.points}\n                  stroke={line.color}\n                  strokeWidth={line.size}\n                  tension={0.5}\n                  lineCap=\"round\"\n                  globalCompositeOperation={\n                    line.tool === 'eraser' ? 'destination-out' : 'source-over'\n                  }\n                />\n              ))}\n            </Layer>\n          </Stage>\n        </StageDiv>\n        <CustomSketchPicker\n          color={color}\n          onChangeComplete={handleChangeComplete}\n        />\n      </FlexDiv>\n      <Wraper>\n        <Space margin=\"16px\">\n          <Tooltip title={getI18nText('tooltip_current_art')}>\n            <Button variant=\"outlined\" endIcon={<FiSend />} onClick={saveFile}>\n              Share Current Art\n            </Button>\n          </Tooltip>\n        </Space>\n        <Space margin=\"16px\">\n          <Tooltip title={getI18nText('tooltip_previous_art')}>\n            <Button variant=\"outlined\" endIcon={<FiSend />} onClick={sharePrev}>\n              Share Previous Art\n            </Button>\n          </Tooltip>\n        </Space>\n      </Wraper>\n    </>\n  )\n}\n\nexport default Component\n\nconst FlexDiv = styled.div`\n  display: flex;\n  justify-content: center;\n`\n\nconst FlexCol = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst StageDiv = styled.div`\n  background-color: #ffffff;\n`\nconst Wrap = styled.div`\n  width: 500px;\n  margin: 0px 32px;\n`\n\nconst CustomSketchPicker = styled(SketchPicker)({\n  marginTop: '10px',\n  marginLeft: '20px',\n})\n\nconst SBsPenFill = styled('div')<{\n  color: string\n}>`\n  background: ${(props) => props.color};\n  height: 4px;\n`\n\nconst Wraper = styled('div')`\n  display: flex;\n  justify-content: center;\n`\n","import Konva from 'konva'\nimport React, { useState } from 'react'\nimport Canvas from '../../components/elements/Canvas'\n\nimport { getFile, saveFile } from '../../libs/Symbol/ImageIO'\n\nimport ShareModal from '../../components/elements/ShareModal'\nimport styled from '@emotion/styled'\nimport { Modal, Paper, Typography } from '@mui/material'\nimport { usePrikey } from '../../utils/PrikeyContext'\n\nexport interface Props {\n  hash: string\n}\n\nconst Page: React.VFC<Props> = ({ hash }) => {\n  const [image, setImage] = React.useState<HTMLImageElement>(new Image())\n  const stageRef = React.useRef<Konva.Stage | null>(null)\n\n  const [open, setOpen] = React.useState(false)\n  const [openPM, setOpenPM] = React.useState(false)\n  const [txHash, setTxHash] = React.useState('')\n  const [isLoading, setIsLoading] = React.useState(true)\n  const [error, setError] = React.useState(false)\n  const context = usePrikey()\n\n  const save = () => {\n    setLoading(true)\n    if (stageRef.current === null) return\n    if (context === undefined) return\n    const img = stageRef.current.toDataURL()\n    console.log(img)\n    saveFile(img, 'draw-chain', context.prikey, hash).then((h) => {\n      setTxHash(h)\n      setLoading(false)\n      setOpen(true)\n    })\n  }\n  const [loading, setLoading] = useState(false)\n  React.useEffect(() => {\n    if (hash === '') {\n      console.log('new game')\n      setIsLoading(false)\n      return\n    }\n    console.log('import:', hash)\n    getFile(hash)\n      .then((img) => {\n        setIsLoading(false)\n        const i = new Image()\n        i.src = img\n        setImage(i)\n      })\n      .catch(() => {\n        console.log('dame')\n        setError(true)\n      })\n  }, [hash])\n\n  if (error) {\n    return <div>NotFound This Transaction</div>\n  }\n\n  if (isLoading) {\n    return <div>GetTransaction....</div>\n  }\n\n  const sharePrev = () => {\n    setOpenPM(true)\n  }\n\n  return (\n    <div>\n      <Canvas\n        saveFile={save}\n        stageRef={stageRef}\n        image={image}\n        sharePrev={sharePrev}\n      />\n      <ShareModal open={open} setOpen={setOpen} txHash={txHash} />\n      {/* <ShareModal open={openPM} setOpen={setOpenPM} txHash={hash} /> */}\n      <Modal open={loading}>\n        <SPaper>\n          <Typography variant=\"h4\" component=\"div\">\n            Create Art...\n          </Typography>\n        </SPaper>\n      </Modal>\n    </div>\n  )\n}\n\nexport default Page\n\nconst SPaper = styled(Paper)`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 50vw;\n  transform: translate(-50%, -50%);\n  padding: 16px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n","import React from \"react\"\nimport Page from \"./Presenter\"\nimport { useParams } from \"react-router-dom\"\n\nconst Container: React.VFC = () => {\n  const { hash } = useParams()\n  return <Page hash={hash || ''}/>\n}\n\nexport default Container\n","import {\n  Account,\n  AggregateTransaction,\n  Deadline,\n  NetworkType,\n  TransferTransaction,\n  UInt64,\n  RepositoryFactoryHttp,\n  PlainMessage,\n  TransactionGroup,\n  Transaction,\n  Address,\n} from 'symbol-sdk'\n\nconst G_HASH =\n  '7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836'\nconst NODE = 'https://sym-test-01.opening-line.jp:3001'\nconst EPOCH = 1637848847\n\nexport const getFile = async (hash: string): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    checkConfirmed(hash)\n      .then((tx) => {\n        if (tx instanceof TransferTransaction) {\n          const h: string = JSON.parse(tx.message.payload).data\n          resolve(innerTxJoin(h))\n        }\n      })\n      .catch(() => {\n        const timer = setInterval(() => {\n          checkUnConfirmed(hash)\n            .then(() => {\n              setTimeout(() => {\n                checkConfirmed(hash)\n                  .then((tx) => {\n                    clearInterval(timer)\n                    if (tx instanceof TransferTransaction) {\n                      const h: string = JSON.parse(tx.message.payload).data\n                      resolve(innerTxJoin(h))\n                    }\n                  })\n                  .catch(() => {\n                    reject('404')\n                  })\n              }, 1000)\n            })\n            .catch(() => {\n              console.log('loading')\n            })\n        }, 1000)\n      })\n  })\n}\n\nconst checkUnConfirmed = (hash: string): Promise<void> => {\n  const repositoryFactory = new RepositoryFactoryHttp(NODE)\n  const transactionHttp = repositoryFactory.createTransactionRepository()\n  return new Promise((res, rej) => {\n    transactionHttp\n      .getTransaction(hash, TransactionGroup.Unconfirmed)\n      .toPromise()\n      .then(() => {\n        rej()\n      })\n      .catch(() => {\n        res()\n      })\n  })\n}\n\nconst checkConfirmed = (hash: string): Promise<Transaction> => {\n  const repositoryFactory = new RepositoryFactoryHttp(NODE)\n  const transactionHttp = repositoryFactory.createTransactionRepository()\n  return new Promise((res, rej) => {\n    transactionHttp\n      .getTransaction(hash, TransactionGroup.Confirmed)\n      .toPromise()\n      .then((tx: Transaction) => {\n        res(tx)\n      })\n      .catch(() => {\n        rej()\n      })\n  })\n}\nconst innerTxJoin = async (hash: string): Promise<string> => {\n  const repositoryFactory = new RepositoryFactoryHttp(NODE)\n  const transactionHttp = repositoryFactory.createTransactionRepository()\n  let data = ''\n\n  return new Promise((resolve) => {\n    transactionHttp\n      .getTransaction(hash, TransactionGroup.Confirmed)\n      .toPromise()\n      .then((agtx) => {\n        const innerTxs = (agtx as AggregateTransaction).innerTransactions\n        for (const inTx of innerTxs) {\n          data += (inTx as TransferTransaction).message.payload\n        }\n        resolve(data)\n      })\n  })\n}\n\nexport const saveFile = async (\n  base64img: string,\n  gameMode: string,\n  prikey: string,\n  previousHash: string\n): Promise<string> => {\n  const signer = Account.createFromPrivateKey(prikey, NetworkType.TEST_NET)\n  const acc = Address.createFromRawAddress(\n    'TDEC5VUUAUYHKI2Y45WBDMGODAS42P3PPCTMGUY'\n  )\n  const array: string[] = []\n  const MSG_SIZE = 1023\n  for (let i = 0; i <= Math.floor(base64img.length / MSG_SIZE); i++) {\n    const arr = base64img.slice(i * MSG_SIZE, (i + 1) * MSG_SIZE)\n    array.push(arr)\n  }\n  // console.log('arr', array)\n\n  //===================================================\n\n  const txs = []\n  const agtxs = []\n  const hashes: string[] = []\n  //===================================================\n\n  const repositoryFactory = new RepositoryFactoryHttp(NODE)\n  const transactionHttp = repositoryFactory.createTransactionRepository()\n\n  for (let i = 0; i < array.length; i++) {\n    // console.log(\"row\", array[i]);\n    const inTx = TransferTransaction.create(\n      Deadline.create(EPOCH),\n      acc,\n      [],\n      PlainMessage.create(array[i]),\n      NetworkType.TEST_NET\n    ).toAggregate(signer.publicAccount)\n\n    txs.push(inTx)\n\n    if (i % 100 !== 99 && i !== array.length - 1) {\n      continue\n    }\n\n    const agtx = AggregateTransaction.createComplete(\n      Deadline.create(EPOCH),\n      txs,\n      NetworkType.TEST_NET,\n      [],\n      UInt64.fromUint(10000000)\n    )\n\n    const signedTx = signer.sign(agtx, G_HASH)\n\n    transactionHttp.announce(signedTx).subscribe(\n      (x) => console.log(x),\n      (err) => console.error(err)\n    )\n    agtxs.push(signedTx)\n    hashes.push(signedTx.hash)\n\n    console.log('a', signedTx)\n  }\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      const data = JSON.stringify({\n        version: 1,\n        name: 'symbol-draw',\n        mode: gameMode,\n        previousHash: previousHash,\n        data: hashes.join(','),\n      })\n\n      const a = []\n      for (let i = 0; i <= Math.floor(data.length / MSG_SIZE); i++) {\n        a.push(data.substr(i * MSG_SIZE, MSG_SIZE))\n      }\n      const tx = TransferTransaction.create(\n        Deadline.create(EPOCH),\n        acc,\n        [],\n        PlainMessage.create(data),\n        NetworkType.TEST_NET,\n        UInt64.fromUint(2000000)\n      )\n\n      const st = signer.sign(tx, G_HASH)\n\n      transactionHttp.announce(st).subscribe(\n        (x) => console.log(x),\n        (err) => console.error(err)\n      )\n      resolve(st.hash)\n    }, 1000)\n  })\n}\n","import { format } from 'date-fns'\n// import config from 'utils/config/SymbolConfig'\nimport * as fileReader from 'promise-file-reader'\nimport {\n  ApostilleTransaction,\n  AuditService,\n  HashFunctionCreator,\n  HashingType,\n  IApostilleOptions,\n  IAuditResult,\n  IPartialTxAuditResult,\n} from 'simple-apostille-v2'\nimport {\n  Account,\n  SignedTransaction,\n  RepositoryFactoryHttp,\n  TransactionService,\n  Address,\n} from 'symbol-sdk'\n\nconst apiEndpoint = 'https://sym-test-01.opening-line.jp:3001' //config.SYMBOL_API_ENDPOINT\nconst generationHash =\n  '7FCCD304802016BEBBCD342A332F91FF1F3BB5E902988B352697BE245F48E836' //config.GENERATION_HASH_SEED\nconst feeMultiplier = 200 //config.FEE_MULTIPLIER\nconst epochAdjustment = 1637848847 //config.EPOCH_ADJUSTMENT\nconst networkType = 152 //config.NETWORK_TYPE\n\nexport type AuditData = {\n  signer: Address\n  apostilleAcount: Address\n  hash: string\n  status: number\n  timestamp: string\n}\n\nexport const getApostilleFileName = (\n  fileName: string,\n  txHash: string\n): string => {\n  const date = format(new Date(), 'yyyy-MM-dd')\n  const [fn, ext] = fileName.split('.')\n  const apostilleFileName = `${fn} -- Apostille TX ${txHash} -- ${date}.${ext}`\n  return apostilleFileName\n}\n\nexport const getFileHash = async (file: File): Promise<string> => {\n  const fileBuffer = await fileReader.readAsArrayBuffer(file)\n  const hashFunc = HashFunctionCreator.create(HashingType.Type.sha256)\n  return hashFunc.hashing(fileBuffer)\n}\n\nconst createAnnounceInfo = async (\n  hashedData: string,\n  fileName: string,\n  signer: Account\n) => {\n  const salt = String(new Date().getTime())\n  const apostilleTx = ApostilleTransaction.createFromHashedData(\n    hashedData,\n    HashingType.Type.sha256,\n    salt + fileName,\n    signer,\n    networkType,\n    generationHash,\n    feeMultiplier,\n    apiEndpoint,\n    epochAdjustment\n  )\n\n  return await apostilleTx.singedTransactionAndAnnounceType()\n}\n\nexport const createApostilleTransaction = async (\n  file: File,\n  signer: Account\n): Promise<unknown> => {\n  if (file === null || signer === null) return\n  try {\n    const fileHash = await getFileHash(file)\n    const announceInfo = await createAnnounceInfo(fileHash, file.name, signer)\n    if (announceInfo) {\n      return announceTransactionByComplete(announceInfo.signedTransaction)\n    }\n  } catch (err) {\n    console.log('err:', err)\n    return err\n  }\n}\n\nconst createRepositoryFactory = () => {\n  return new RepositoryFactoryHttp(apiEndpoint, {\n    generationHash,\n    networkType,\n    websocketUrl: `${apiEndpoint.replace('http', 'ws')}/ws`,\n    websocketInjected: WebSocket,\n  })\n}\nconst createTransactionService = () => {\n  const repositoryFactory = createRepositoryFactory()\n  return new TransactionService(\n    repositoryFactory.createTransactionRepository(),\n    repositoryFactory.createReceiptRepository()\n  )\n}\n\nconst createListener = () => {\n  const repositoryFactory = createRepositoryFactory()\n  return repositoryFactory.createListener()\n}\n\nconst announceTransactionByComplete = async (signedTx: SignedTransaction) => {\n  return new Promise((resolve, reject) => {\n    const transactionService = createTransactionService()\n    const listener = createListener()\n\n    if (transactionService && listener) {\n      listener\n        .open()\n        .then(() => {\n          transactionService.announce(signedTx, listener).subscribe(\n            (x) => {\n              listener.close()\n              console.log('complate')\n              resolve(x)\n            },\n            (err) => {\n              listener.close()\n              console.log('err:', err)\n              reject(err)\n            }\n          )\n        })\n        .catch((err) => {\n          console.log('err:', err)\n          reject(err)\n        })\n    }\n  })\n}\nconst createOption = (title: string): IApostilleOptions => {\n  return {\n    metadata: {\n      title: title,\n    },\n  }\n}\n\nconst getTxHash = (filename: string): string => {\n  const regexp = /--\\sApostille\\sTX\\s(\\w+)\\s--/\n  const match = filename.match(regexp)\n  if (match === null || match.length < 1) {\n    console.log('not match')\n    return ''\n  } else {\n    console.log('match')\n    return match[1]\n  }\n}\n\nconst getValidStatus = (r: IAuditResult | IPartialTxAuditResult): number => {\n  if (r.isValid) {\n    if (r.type === 0) return 0\n    if (r.type === 1) return 1\n  }\n  return -1\n}\n\nexport const audit = async (file: File): Promise<AuditData> => {\n  const fileBuf = await fileReader.readAsArrayBuffer(file)\n  const hash = getTxHash(file.name)\n  return new Promise((resolve, reject) => {\n    AuditService.audit(fileBuf, hash, apiEndpoint)\n      .then((r) => {\n        if (!r.signer || !r.apostilleAccount) {\n          // setOpen(true)\n          console.log('reject', r)\n          reject()\n        } else {\n          const status = getValidStatus(r)\n          const t: string =\n            JSON.parse(JSON.stringify(r)).timestamp.split('.')[0] || ''\n          resolve({\n            signer: r.signer,\n            apostilleAcount: r.apostilleAccount,\n            hash: hash,\n            status: status,\n            timestamp: t,\n          })\n        }\n      })\n      .catch((e) => {\n        console.error('ERROR')\n        console.error(e)\n        reject()\n        // setOpen(true)\n      })\n  })\n}\n"],"sourceRoot":""}